@{
    ViewData["Title"] = "Model Comparison";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<section class="content">
    <div class="container-fluid">

        <div class="card card-primary">
            <div class="card-header">
                <h3 class="card-title">Run Comparison</h3>
            </div>
            <div class="card-body">

                <div class="mb-3">
                    <label for="comparisonInput" class="form-label">Input Prompt</label>
                    <textarea id="comparisonInput" class="form-control" rows="3"></textarea>
                </div>

                <div class="mb-3">
                    <label for="providerSelect" class="form-label">Select Models</label>
                    <select id="providerSelect" class="form-control" multiple></select>
                    <small class="form-text text-muted">
                        Hold CTRL (Windows) or CMD (Mac) to select multiple models.
                    </small>
                </div>

                <button id="runComparisonBtn" class="btn btn-primary">
                    <i class="fas fa-play"></i> Run Comparison
                </button>
            </div>
        </div>

        <div id="comparisonResults" class="mt-3"></div>

    </div>
</section>
<div id="comparisonLoading" class="text-center my-3" style="display:none;">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
    <p>Running comparison, please wait...</p>
</div>

@section Scripts {
    <script src="~/admin/js/comparison.js"></script>
    <script>
        $(document).ready(function () {
            loadProviders();
            $("#runComparisonBtn").off("click").on("click", runComparison); // ✅ ensures only one handler
        });    
    </script>
}

